@inherits LayoutComponentBase
@inject NavigationManager Navigation
@using CreateInvoiceSystem.Frontend.Services
@inject AuthService AuthService

<div class="page">    
    <div class="sidebar d-flex flex-column" style="background: #2c3e50; color: white; min-width: 250px; height: 100vh;">
        <div class="top-row ps-3 navbar navbar-dark">
            <a class="navbar-brand" href="dashboard">System Faktur</a>
        </div>

        <nav class="flex-column p-3 flex-grow-1">
            <div class="nav-item px-3 mb-2">
                <NavLink class="nav-link text-white" href="dashboard">
                    🏠 Dashboard
                </NavLink>
            </div>
            <div class="nav-item px-3 mb-2">
                <NavLink class="nav-link text-white" href="invoices">
                    📄 Faktury
                </NavLink>
            </div>
            <div class="nav-item px-3 mb-2">
                <NavLink class="nav-link text-white" href="clients">
                    👥 Klienci
                </NavLink>
            </div>
            <div class="nav-item px-3 mb-2">
                <NavLink class="nav-link text-white" href="products">
                    📦 Produkty
                </NavLink>
            </div>
            <div class="nav-item px-3 mb-2">
                <NavLink class="nav-link text-white" href="nbp-rates">
                    💰 Kursy NBP
                </NavLink>
            </div>
        </nav>
        
        <div class="mt-auto p-3 border-top border-secondary">
            <div class="nav-item px-3 mb-1">
                <NavLink class="nav-link text-white-50 small" href="settings">
                    ⚙️ Ustawienia
                </NavLink>
            </div>
            <div class="nav-item px-3">                
                <button class="btn btn-link nav-link text-danger small w-100 text-start p-0 border-0 shadow-none"
                        @onclick="HandleLogout">
                    🚪 Wyloguj się
                </button>
            </div>
        </div>
    </div>

    <main>
        <div class="top-row px-4">
        </div>

        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

@code {
    private async Task HandleLogout()
    {        
        await AuthService.LogoutAsync();
        Navigation.NavigateTo("/", forceLoad: true);
    }
}